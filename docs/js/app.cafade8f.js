(function(t){function e(e){for(var s,o,i=e[0],l=e[1],c=e[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},n={app:0},r=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("ee52")},"0ba8":function(t,e,a){},1255:function(t,e,a){"use strict";a("0ba8")},"56d7":function(t,e,a){"use strict";a.r(e);a("6a04"),a("371b"),a("1fa9"),a("2419");var s=a("a593"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-container",[a("el-header",[a("i",{staticClass:"el-icon-user"}),a("i",{staticClass:"el-icon-bell"}),a("h1",[t._v("支持自主上班制的HR系统")])]),a("el-container",[a("el-aside",{attrs:{width:"200px"}},[a("div",{staticClass:"asi"},[a("el-row",{staticClass:"tac"},[a("el-col",{attrs:{span:24}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2"},on:{open:t.handleOpen,close:t.handleClose}},[a("el-submenu",{attrs:{index:"0"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-home"}),a("span",[a("router-link",{attrs:{to:"/"}},[t._v("我的首页")])],1)])],2),a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",[t._v("日常管理")])]),a("el-menu-item",{attrs:{index:"1-1"}},[t._v("换班")]),a("el-menu-item",{attrs:{index:"1-2"}},[t._v("请假")]),a("el-menu-item",{attrs:{index:"1-3"}},[t._v("出差")])],2),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-postcard"}),a("span",[a("router-link",{attrs:{to:"/cvmain"}},[t._v("简历管理")])],1)]),a("el-menu-item",{attrs:{index:"2-1"}},[a("a",{attrs:{href:"#CV1"}},[t._v("基本信息")])]),a("el-menu-item",{attrs:{index:"2-2"}},[a("a",{attrs:{href:"#CV2"}},[t._v("教育背景")])]),a("el-menu-item",{attrs:{index:"2-3"}},[a("a",{attrs:{href:"#CV3"}},[t._v("项目经历")])]),a("el-menu-item",{attrs:{index:"2-4"}},[a("a",{attrs:{href:"#CV4"}},[t._v("荣誉奖项")])]),a("el-menu-item",{attrs:{index:"2-5"}},[a("a",{attrs:{href:"#CV5"}},[t._v("个人标签")])])],2),a("el-submenu",{attrs:{index:"3"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-postcard"}),a("span",[t._v("考勤管理")])]),a("el-menu-item",{attrs:{index:"3-1"}},[t._v("值班表")]),a("el-menu-item",{attrs:{index:"3-2"}},[t._v("打卡日历")]),a("el-menu-item",{attrs:{index:"3-3"}},[t._v("考勤分析")])],2),a("el-submenu",{attrs:{index:"4"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-postcard"}),a("span",[t._v("绩效管理")])]),a("el-menu-item",{attrs:{index:"4-1"}},[t._v("绩效计划申请")]),a("el-menu-item",{attrs:{index:"4-2"}},[t._v("绩效审核申请")]),a("el-menu-item",{attrs:{index:"4-3"}},[t._v("工作进度")])],2),a("el-submenu",{attrs:{index:"5"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-postcard"}),a("span",[t._v("薪资管理")])]),a("el-menu-item",{attrs:{index:"5-1"}},[t._v("工资条")]),a("el-menu-item",{attrs:{index:"5-2"}},[t._v("薪资走势分析")])],2)],1)],1)],1)],1)]),a("el-main",[a("router-view")],1)],1)],1)],1)},r=[],o={name:"App",mounted:function(){},methods:{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)}}},i=o,l=(a("034f"),a("c701")),c=Object(l["a"])(i,n,r,!1,null,null,null),u=c.exports,d=a("e1fd"),m=a.n(d),p=a("82ae"),h=a.n(p),f=a("a81e"),v=(a("f56d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cvmain"},[a("el-form",{ref:"form",attrs:{model:t.CV,"label-width":"80px"}},[a("div",{attrs:{id:"CV1"}},[a("uphoto",{ref:"photo"}),a("div",{staticClass:"info"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.CV.name,expression:"CV.name"}],attrs:{type:"text",id:"first",placeholder:"请输入姓名"},domProps:{value:t.CV.name},on:{input:function(e){e.target.composing||t.$set(t.CV,"name",e.target.value)}}}),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.CV.disc,expression:"CV.disc"}],attrs:{type:"text",id:"second",placeholder:"请一句话简介自己"},domProps:{value:t.CV.disc},on:{input:function(e){e.target.composing||t.$set(t.CV,"disc",e.target.value)}}}),a("br"),a("seles",{ref:"sex",attrs:{sex:t.CV.sex}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.CV.age,expression:"CV.age"}],staticClass:"age",attrs:{type:"text",placeholder:"年龄"},domProps:{value:t.CV.age},on:{input:function(e){e.target.composing||t.$set(t.CV,"age",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.CV.tele,expression:"CV.tele"}],staticClass:"conta",attrs:{type:"text",placeholder:"请输入联系方式"},domProps:{value:t.CV.tele},on:{input:function(e){e.target.composing||t.$set(t.CV,"tele",e.target.value)}}})],1)],1),a("h3",[t._v("教育背景")]),t._l(t.CV.CV2s,(function(e,s){return a("div",{key:s,attrs:{id:"CV2",index:s}},[a("el-form-item",[a("span",{staticStyle:{display:"none"}},[t._v(t._s(e.id))]),a("datechoice",{ref:"CV2time",refInFor:!0,attrs:{timea:e.startime,timeb:e.endtime}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.schoolname,expression:"CV2.schoolname"}],staticClass:"yourname",attrs:{type:"text",placeholder:"请输入学校名称"},domProps:{value:e.schoolname},on:{click:function(e){return t.getime1(e)},input:function(a){a.target.composing||t.$set(e,"schoolname",a.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.major,expression:"CV2.major"}],staticClass:"major",attrs:{type:"text",placeholder:"专业"},domProps:{value:e.major},on:{input:function(a){a.target.composing||t.$set(e,"major",a.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.majorclass,expression:"CV2.majorclass"}],staticClass:"major",staticStyle:{width:"80%"},attrs:{type:"text",placeholder:"主修课程"},domProps:{value:e.majorclass},on:{input:function(a){a.target.composing||t.$set(e,"majorclass",a.target.value)}}}),a("input",{staticClass:"additem",attrs:{type:"button",value:"+"},on:{click:t.additem1}}),a("input",{staticClass:"additem",attrs:{type:"button",value:"-"},on:{click:function(e){return t.deletitem(e,t.CV.CV2s)}}})],1)],1)})),a("h3",[t._v("项目经历")]),t._l(t.CV.CV3s,(function(e,s){return a("div",{key:s,attrs:{id:"CV3"}},[a("el-form-item",[a("span",{staticStyle:{display:"none"}},[t._v(t._s(e.id))]),a("datechoice",{ref:"CV3time",refInFor:!0,attrs:{timea:e.startime,timeb:e.endtime}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.subjectname,expression:"CV3.subjectname"}],staticClass:"yourname",attrs:{type:"text",placeholder:"请输入项目名称"},domProps:{value:e.subjectname},on:{click:function(e){return t.getime2(e)},input:function(a){a.target.composing||t.$set(e,"subjectname",a.target.value)}}}),a("el-input",{staticClass:"subject",attrs:{type:"textarea",autosize:{minRows:2},placeholder:"请输入项目内容"},model:{value:e.subject,callback:function(a){t.$set(e,"subject",a)},expression:"CV3.subject"}}),a("input",{staticClass:"additem",attrs:{type:"button",value:"+"},on:{click:t.additem2}}),a("input",{staticClass:"additem",attrs:{type:"button",value:"-"},on:{click:function(e){return t.deletitem(e,t.CV.CV3s)}}})],1)],1)})),a("h3",[t._v("荣誉奖项")]),t._l(t.CV.CV4s,(function(e,s){return a("div",{key:s,attrs:{id:"CV4"}},[a("span",{staticStyle:{display:"none"}},[t._v(t._s(e.id))]),a("div",{staticClass:"datechoose"},[a("el-date-picker",{attrs:{type:"month",placeholder:"获奖年月"},model:{value:e.prizedate,callback:function(a){t.$set(e,"prizedate",a)},expression:"CV4.prizedate"}})],1),a("input",{staticClass:"yourname",attrs:{type:"text",placeholder:"奖项名称"}}),a("el-input",{staticClass:"subject",attrs:{type:"textarea",autosize:{minRows:2},placeholder:"请输入奖项描述"},model:{value:e.prizedisc,callback:function(a){t.$set(e,"prizedisc",a)},expression:"CV4.prizedisc"}}),a("input",{staticClass:"additem",attrs:{type:"button",value:"+"},on:{click:t.additem3}}),a("input",{staticClass:"additem",attrs:{type:"button",value:"-"},on:{click:function(e){return t.deletitem(e,t.CV.CV4s)}}})],1)})),a("h3",[t._v("个人标签")]),a("div",{attrs:{id:"CV5"}},[a("el-form-item",{model:{value:t.CV.CV5,callback:function(e){t.$set(t.CV,"CV5",e)},expression:"CV.CV5"}},[a("div",{staticClass:"yourtags"},[t._l(t.CV.CV5.dynamicTags,(function(e){return a("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.handleClose(e)}}},[t._v(" "+t._s(e)+" ")])})),t.CV.CV5.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.CV.CV5.inputValue,callback:function(e){t.$set(t.CV.CV5,"inputValue",e)},expression:"CV.CV5.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")])],2)])],1),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即创建")]),a("el-button",[t._v("取消")])],2)],1)}),g=[],C=(a("69bf"),a("90d4"),a("5c4c"),a("845c"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uphoto"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:8000","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",attrs:{id:"addPic"}})])],1)}),V=[],w={name:"uphoto",data:function(){return{imageUrl:""}},methods:{handleAvatarSuccess:function(t,e){console.log("sucsse"),console.log(t),console.log(e)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a}}},b=w,y=(a("1255"),Object(l["a"])(b,C,V,!1,null,null,null)),x=y.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"seles"},[a("el-select",{attrs:{placeholder:"性别"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)},D=[],_={name:"seles",props:["sex"],data:function(){return{options:[{value:"选项1",label:"男"},{value:"选项2",label:"女"}],value:""}},mounted:function(){var t=this;setTimeout((function(){t.value=t.sex}),500)}},j=_,S=Object(l["a"])(j,k,D,!1,null,null,null),$=S.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"datechoice"},[a("div",{staticClass:"datechoose"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择开始日期"},model:{value:t.startime,callback:function(e){t.startime=e},expression:"startime"}})],1),a("span",[t._v("-")]),a("div",{staticClass:"datechoose"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择结束日期"},model:{value:t.endtime,callback:function(e){t.endtime=e},expression:"endtime"}})],1)])},P=[],T={name:"datechoice",props:["timea","timeb"],data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},startime:"",endtime:""}},mounted:function(){var t=this;setTimeout((function(){t.startime=t.timea,t.endtime=t.timeb}),500)}},z=T,M=(a("c731"),Object(l["a"])(z,O,P,!1,null,null,null)),A=M.exports,E="http://localhost:8000",L={name:"cvmain",data:function(){return{CV:{imagurl:"",name:"",disc:"",sex:"",age:"",tele:"",CV2s:[{id:"",schoolname:"",major:"",majorcclass:"",startime:"",endtime:""}],CV3s:[{id:"",startime:"",endtime:"",subjectname:"",sbuject:""}],CV4s:[{id:"",prizedate:"",prizedisc:""}],CV5:{dynamicTags:["音乐","电影","旅游","健身"],inputVisible:!1,inputValue:""}}}},created:function(){this.getCV()},methods:{getCV:function(){var t=this;this.axios({method:"get",url:E+"/getCV",params:{data:{name:"张三"}}}).then((function(e){e=e.data,t.CV=e.CV}))},getime1:function(t){var e=this.CV.CV2s,a=t.target.parentElement.firstElementChild.innerHTML,s=this.$refs.CV2time[a];this.$options.methods.getimee(t,e,s,a)},getime2:function(t){var e=this.CV.CV3s,a=t.target.parentElement.firstElementChild.innerHTML,s=this.$refs.CV3time[a];this.$options.methods.getimee(t,e,s,a)},getimee:function(t,e,a,s){e[s].startime=a.startime,e[s].endtime=a.endtime},additem1:function(){var t=1*this.CV.CV2s.length;this.CV.CV2s.push({id:t,schoolname:"",major:"",majorcclass:"",startime:"",endtime:""})},additem2:function(){var t=1*this.CV.CV3s.length;this.CV.CV3s.push({id:t,subjectname:"",sbuject:""})},additem3:function(){var t=1*this.CV.CV4s.length;this.CV.CV4s.push({id:t,prizedate:"",prizedisc:""})},deletitem:function(t,e){var a=1*t.target.parentElement.firstElementChild.innerHTML;if(console.log(e),e.length>=2){var s=new Promise((function(t){var s=e.splice(a,1);console.log(s),t("弹出结束")}));s.then((function(){for(var t=a;t<e.length;t++)(function(t){e[t].id=1*t,console.log("第"+t+"个修改完毕")})(t)}))}},handleClose:function(t){this.CV.CV5.dynamicTags.splice(this.CV.CV5.dynamicTags.indexOf(t),1)},showInput:function(){this.CV.CV5.inputVisible=!0,this.$nextTick((function(){this.CV.CV5.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var t=this.CV.CV5.inputValue;t&&this.CV.CV5.dynamicTags.push(t),this.CV.CV5.inputVisible=!1,this.CV.CV5.inputValue=""},onSubmit:function(){console.log("submit!"),this.CV.sex=this.$refs.sex.value;var t={CV:{imagurl:this.CV.imagurl,name:this.CV.name,disc:this.CV.disc,age:this.CV.age,tele:this.CV.tele,CV2s:this.CV.CV2s,CV3s:this.CV.CV3s,CV4s:this.CV.CV4s,CV5:this.CV.CV5}};this.axios({method:"post",url:"http://localhost:8000/setCV",params:{data:t}}).then((function(t){t=t.data,console.log(t),2e3===t.srarus&&console.log("炸了")})),console.log(t)}},components:{uphoto:x,seles:$,datechoice:A}},I=L,F=(a("dfb9"),Object(l["a"])(I,v,g,!1,null,null,null)),N=F.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content workatten",attrs:{id:"workcan"}}),a("button",{staticClass:"workattend",on:{click:t.workattendence}},[t._v("打卡")])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content workatten",attrs:{id:"workatenchart"}})])],1),a("el-row",{attrs:{gutter:1}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content performance",attrs:{id:"progress"}})]),a("button",{staticClass:"prog",on:{click:t.addprogress}},[t._v("添加今日进度")])],1)],1)},R=[],U=(a("02bf"),a("233a"),a("d8f4"),a("2083"),a("4d28")),H="http://localhost:8000",J={name:"home",data:function(){return{workcanData:{id:1,workok:0},workcancharts:"",workatencharts:"",workatenchartsData:{id:"",startime:[],endtime:[],worktime:[]},progresschart:"",progresschartData:{oldprogress:[],nowprogress:[]}}},methods:{showchart2:function(){var t=this,e=document.getElementById("workatenchart");this.workatencharts=U.init(e);var a=new Array,s=new Array;this.getAttendenceData(a).then((function(t){a=t,console.log("原始数据:"),console.log(a)})).then((function(){var t,e=new Date,s=1*e.getDay();t=0==s?6:s-1;var n=Date.parse(e.toLocaleDateString());n-=24*t*3600*1e3;for(var r=function(t){(function(e){var s=Date.parse(a[e].date);s<n&&t--})(t),o=t},o=0;o<a.length;o++)r(o)})).then((function(){var t=function(t,e){return t.startime<e.startime?-1:t.startime>e.startime?1:0};a.sort(t),console.log(a)})).then((function(){for(var t=0;t<a.length;t++)(function(t){var e=new Date(a[t].startime),n=new Date(a[t].endtime),r=e.getDay();0==r&&(r=7),s.push(r);var o=a[t].worktime/3600/1e3,i=Math.floor(o)+":"+Math.round(60*(o-Math.floor(o)));a[t].startime="2020/1/1 "+e.toLocaleString("chinese",{hour12:!1}).slice(9,14),a[t].endtime="2020/1/1 "+n.toLocaleString("chinese",{hour12:!1}).slice(9,14),a[t].worktime="2020/1/1 "+i})(t)})).then((function(){s.sort((function(t,e){return t-e})),t.workatenchartsData.startime=[],t.workatenchartsData.endtime=[],t.workatenchartsData.worktime=[];var e=new Date;e=e.getDay(),0==e&&(e=7);for(var n=0,r=0;r<e;r++)console.log(s),function(e){console.log(e),console.log(n),e==s[n]-1?(t.workatenchartsData.startime.push(a[n].startime),t.workatenchartsData.endtime.push(a[n].endtime),t.workatenchartsData.worktime.push(a[n].worktime),n++):(t.workatenchartsData.startime.push("2020/1/1 00:00:00"),t.workatenchartsData.endtime.push("2020/1/1 00:00:00"),t.workatenchartsData.worktime.push("2020/1/1 00:00:00"))}(r)})).then((function(){var e={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}},formatter:function(t){for(var e,a=function(e){e==t.length-1?(t[e].value=t[e].value.slice(9,14),console.log(t[e].value)):function(){var a=new Date(t[e].value);a=a.toLocaleString("chinese",{hour12:!1}),a=a.slice(9,14),"24:00"==a&&(a="00:00"),t[e].value=a}()},s=0;s<t.length;s++)a(s);return e="下班时间："+t[0].value+"</br>上班时间："+t[1].value+"</br>工作时长："+t[2].value,e}},grid:{width:"80%"},toolbox:{feature:{saveAsImage:{show:!0}}},legend:{data:["上班时间","下班时间","工作时长"]},xAxis:[{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"],axisPointer:{type:"shadow"}}],yAxis:[{type:"time",name:"时间",min:"2020/1/1 00:00:00",max:"2020/1/1 23:59:59",axisLabel:{formatter:function(t){var e=new Date(t);return e=e.toLocaleString("chinese",{hour12:!1}),e=e.slice(9,14),"24:00"==e&&(e="00:00"),console.log(e),e}},axisPointer:{label:{formatter:function(t){var e=new Date(t.value);return e=e.toLocaleString("chinese",{hour12:!1}),e=e.slice(9,14),"24:00"==e&&(e="00:00"),e}}},axisTick:{show:!0},data:["下班时间","上班时间"]}],series:[{name:"工作时长",type:"bar",itemStyle:{color:"#FFDAB9"},data:t.workatenchartsData.worktime},{name:"下班时间",type:"line",itemStyle:{color:"#FF9224"},data:t.workatenchartsData.endtime},{name:"上班时间",type:"line",itemStyle:{color:"#FFD306"},data:t.workatenchartsData.startime}]};t.workatencharts.setOption(e)}))},showchart1:function(){var t=this,e=document.getElementById("workcan");this.workcancharts=U.init(e);var a,s,n,r=new Date,o=r.getFullYear(),i=r.getMonth()+1,l=r.getDate();12==i?(a=o+1,n="01",s=a+"-"+n+"-01"):(a=o,n=i+1),i<10&&(i="0"+i),l<10&&(l="0"+l),n<10&&(n="0"+n);var c=o+"-"+i+"-01";s=a+"-"+n+"-01";var u=o+"-"+i;function d(t,e){for(var a=+U.number.parseDate(t),s=+U.number.parseDate(e),n=864e5,r=[],o=a;o<s;o+=n)r.push([U.format.formatTime("yyyy-MM-dd",o),Math.floor(1e4*Math.random())]);return r}function m(t,e){return U.util.map(t,(function(t,a){var s=e.convertToPixel("calendar",t);return{id:a+"pie",center:s}}))}var p,h=d(c,s),f=[70,70],v={tooltip:{},calendar:{top:"middle",left:"center",orient:"vertical",cellSize:f,yearLabel:{show:!1,textStyle:{fontSize:22}},dayLabel:{margin:20,firstDay:1,nameMap:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},monthLabel:{show:!1},range:[u]},series:[{id:"label",type:"scatter",coordinateSystem:"calendar",symbolSize:1,label:{normal:{show:!0,formatter:function(t){return U.format.formatTime("dd",t.value[0])},offset:[-f[0]/2+10,-f[1]/2+10],textStyle:{color:"#000",fontSize:14}}},data:h}]};this.workcancharts.setOption(v);var g,C=this.workcancharts,V=new Array;this.getAttendenceData(V).then((function(t){V=t})).then((function(){var t=function(t,e){return t.startime<e.startime?-1:t.startime>e.startime?1:0};g=1*V.sort(t)[0].date.slice(7)})).then((function(){var e=t.getPieSeries(h,C,g,V);setTimeout((function(){p=!0,C.setOption({series:e})}),10)})),window.onresize=function(){p&&C.setOption({series:m(h,C)})}},getAttendenceData:function(t){return this.axios({method:"get",url:H+"/getattendencedata",params:{data:{id:1}}}).then((function(e){return e=e.data,t=e.data,t}))},getPieSeries:function(t,e,a,s){var n=new Date;n=n.getDate();var r=0;return U.util.map(t,(function(t,o){var i="red",l=0;if(o<=n-1)if(r<s.length){if(o==a-1){var c=s[r].date.split("/")[2];if(o==c-1){l=s[r].worktime/1e3/3600,l=Math.round(100*l)/100;var u=s[r].workok;switch(u){case 0:i="red";break;case 1:i="orange";break;case 2:i="#409EFF";break}r++}a++}}else i="red";else i="white";var d=e.convertToPixel("calendar",t);return{id:o+"pie",type:"pie",center:d,itemStyle:{color:i},label:{normal:{formatter:"{c}",position:"inside"}},radius:22,data:[{name:"工作时长",value:l}]}}))},workattendence:function(){var t=this,e=new Date,a=e.getTime(),s=e.toLocaleDateString();console.log("打卡时间："),console.log(s),this.axios({method:"get",url:H+"/workattendence",params:{data:{id:1,time:a,date:s}}}).then((function(t){t=t.data,alert(t)})).then((function(){t.showchart1(),t.showchart2()}))},showchart3:function(){var t=this,e=document.getElementById("progress");this.progresschart=U.init(e);var a=H+"/showprogress",s=(new Date).toLocaleDateString();this.axios({method:"get",url:a,params:{data:{id:1,date:s}}}).then((function(e){t.progresschartData.oldprogress=[],t.progresschartData.nowprogress=[],e=e.data,console.log(e),t.progresschartData.oldprogress=e.oldprogress,t.progresschartData.nowprogress=e.nowprogress})).then((function(){var e=t.progresschartData.nowprogress;console.log("填充的数据是：");var a=t.progresschartData.oldprogress;console.log(a);var s={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"1%",top:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"]},series:[{name:"截至前一日累计进度",type:"bar",stack:"总量",itemStyle:{},label:{show:!0,position:"insideRight"},data:a},{name:"当日进度",type:"bar",stack:"总量",label:{show:!0,position:"insideRight"},data:e}]};t.progresschart.setOption(s)}))},addprogress:function(){var t=this,e=prompt("请输入今日工作进度","请输入今日工作进度");e*=1;var a=this.progresschartData.oldprogress.length,s=this.progresschartData.oldprogress[a-1]+e;this.progresschartData.oldprogress.push(s),this.progresschartData.nowprogress.push(e),this.progresschartData.oldprogress=this.progresschartData.oldprogress.slice(-2),console.log("删除后："),console.log(this.progresschartData.oldprogress),this.progresschartData.nowprogress=this.progresschartData.nowprogress.slice(-2),console.log(this.progresschartData.nowprogress);var n=new Date;n=n.getTime(),this.axios({method:"get",url:H+"/saveprogress",params:{data:{id:1,nowprogress:this.progresschartData.nowprogress,oldprogress:this.progresschartData.oldprogress,date:n}}}).then((function(e){e=e.data,alert(e.msg),t.showchart3()}))}},mounted:function(){this.showchart1(),this.showchart2(),this.showchart3()}},G=J,Y=(a("7df3"),Object(l["a"])(G,B,R,!1,null,null,null)),q=Y.exports;s["default"].prototype.axios=h.a,s["default"].config.productionTip=!1,s["default"].use(m.a),s["default"].use(f["a"]);var K=[{path:"/",component:q},{path:"/cvmain",component:N}],Q=new f["a"]({mode:"hash",routes:K});new s["default"]({render:function(t){return t(u)},router:Q}).$mount("#app")},6764:function(t,e,a){},"7df3":function(t,e,a){"use strict";a("8892")},8892:function(t,e,a){},c731:function(t,e,a){"use strict";a("d4b9")},d4b9:function(t,e,a){},dfb9:function(t,e,a){"use strict";a("6764")},ee52:function(t,e,a){}});
//# sourceMappingURL=app.cafade8f.js.map